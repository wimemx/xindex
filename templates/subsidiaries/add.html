<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="/static/chosen_v1.0.0/chosen.css">
</head>
<body>
<div class="modal-dialog" id="addSubsidiaryModal">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close"
                    data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Crear una nueva sucursal</h4>
        </div>
        <div class="modal-body">
            <div class="padder-xl">
                <form class="form-horizontal animated fadeInRight" data-validate="parsley" id="add-subsidiary-form" method="POST"
                      action="/subsidiaries/add/">{% csrf_token %}
                    <div class="form-group m-t-lg">
                        Company
                            {{ formulario.company }}
                            {{ formulario.company.errors }}
                    </div>
                    <div class="form-group m-t-lg">
                        Nombre:
                            {{ formulario.name }}
                            {{ formulario.name.errors }}
                    </div>
                    <div class="form-group m-t-lg">
                        Telefono:
                            {{ formulario.phone }}
                    </div>
                    <div class="form-group m-t-lg hidden">
                        RFC:
                            {{ formulario.rfc }}
                    </div>
                    <div class="form-group m-t-lg">
                        Tipo de sucursal:
                            {{ formulario.subsidiary_types }}
                    </div>
                    <div class="form-group m-t-lg">
                        Dirección:
                            {{ formulario.address }}
                    </div>
                    <div class="form-group m-t-lg">
                        País:
                            {{ formulario.country_id }}
                    </div>
                    <div class="form-group m-t-lg">
                        Estado:
                            {{ formulario.state_id }}
                    </div>
                    <div class="form-group m-t-lg">
                        Ciudad:
                            {{ formulario.city_id }}
                    </div>
                    <div class="form-group">
                        <button type="submit"
                                class="btn bg-success btn-modal-xindex pull-right">
                            Guardar
                        </button>
                            <a class="btn btn-white btn-modal-xindex pull-right" href="/subsidiaries">
                                Cancelar
                            </a>
                    </div>
                </form>
           </div>
        </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->

<script src="/static/chosen_v1.0.0/chosen.jquery.js" type="text/javascript"></script>
<script src="/static/chosen_v1.0.0/docsupport/prism.js" type="text/javascript" charset="utf-8"></script>
<script>
/*
    var config = {
        '.chosen-select'           : {},
        '.chosen-select-deselect'  : {allow_single_deselect:true},
        '.chosen-select-no-single' : {disable_search_threshold:10},
        '.chosen-select-no-results': {no_results_text:'Sin resultados'},
        '.chosen-select-width'     : {width:"100%"}
    }
    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }

    //// <------ Remove modal with close class ->
    $('.close').on('click', function (e) {
        e.preventDefault();
        $('div.modal').modal('hide');
        $('#ajaxModal').remove();
    });

    $("#country_select").on('change', function (e) {
        e.preventDefault();

        var country_filter = $('#country_select').val();
        var url = "/zones/country/" + country_filter;
        $.ajax({
            type: "GET",
            url: url,
            dataType: 'json',
            data: 'nocache' + Math.random(),
            success: function (response) {
                var options = '';
                $.each(response["states"], function(idx,state) {
                    options += '<option value="' + state.id + '">' +
                               state.name + '</option>'
                });

                var select = 'Estados:' +
                    '<select multiple class="chosen-select form-control" id="state_select"' +
                    'data-placeholder="Selecciona los estados">' +
                    options +
                    '</select>';
                $('#first').html(select);
                $(".chosen-select").chosen();
            },
            error: function (response) {
                alert('NO!')
            }
        });

    });
 */
</script>
</body>
</html>